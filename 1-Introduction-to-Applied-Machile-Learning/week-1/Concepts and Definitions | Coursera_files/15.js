(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"23qH":function(module,exports,e){"use strict";var t=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=t(e("VbXa")),n,a=function(e){function OnDemandDiscussionQuestions(){return e.apply(this,arguments)||this}return(0,r.default)(OnDemandDiscussionQuestions,e),OnDemandDiscussionQuestions}(t(e("W3Lk")).default);a.RESOURCE_NAME="onDemandDiscussionQuestions.v1";var o=a;exports.default=o},"2jK5":function(module,exports,e){"use strict";var t=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=t(e("VbXa")),n=t(e("W3Lk")),a=t(e("FGtb")),o=function(e){function OnDemandDiscussionPrompts(){return e.apply(this,arguments)||this}return(0,r.default)(OnDemandDiscussionPrompts,e),OnDemandDiscussionPrompts}(n.default);o.RESOURCE_NAME="onDemandDiscussionPrompts.v1",o.DEFAULT_INCLUDES=["question"],o.DEFAULT_FIELDS=["promptType","".concat(a.default.RESOURCE_NAME,"(").concat(a.default.DEFAULT_FIELDS.join(","),")")];var s=o;exports.default=s},BMks:function(module,exports,e){"use strict";var t=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.RespondedLearnersImage=exports.Completed=exports.Saving=exports.Input=void 0;var r=t(e("VbXa")),n=t(e("sbe7")),a=e("l2sx"),o=t(e("VYij")),s=t(e("wiyT")),u=t(e("CWYE")),i=t(e("BDKN")),l=e("hN99"),d=t(e("y1LI")),p=t(e("rcV8")),c=t(e("8cuT")),f=t(e("ZEYT")),m=t(e("g21z")),v=e("V4Vm"),g=e("SaLm"),h=t(e("GP6s")),y=4,I=function(e){function RespondedLearnersImageBaseComponent(){return e.apply(this,arguments)||this}(0,r.default)(RespondedLearnersImageBaseComponent,e);var t=RespondedLearnersImageBaseComponent.prototype;return t.renderMorePeopleImage=function renderMorePeopleImage(){if(this.props.responseCount>4){var e=(0,v.formatCount)(this.props.responseCount-4,!0);return n.default.createElement("li",{className:"bgcolor-black-g3"},n.default.createElement("div",{className:"horizontal-box align-items-absolute-center num-responder-images caption-text"},"+",e))}return null},t.render=function render(){var e=this.props.answers,t=e&&e.filter(function(e,t){return t<4}).map(function(e){return{image:e.creator.photoUrl,name:e.creator.fullName}});if(!t||0===t.length)return null;return n.default.createElement("ul",{className:"nostyle horizontal-box align-items-absolute-center learner-image-list"},t.map(function(e){var t=e.name,r=e.image;return n.default.createElement("li",{key:t},n.default.createElement(m.default,{width:32,height:32,fullName:t,profileImageUrl:r}))}),this.renderMorePeopleImage())},RespondedLearnersImageBaseComponent}(n.default.Component);I.propTypes={responseCount:n.default.PropTypes.number.isRequired,answers:n.default.PropTypes.array};var E=function(e){function Input(){return e.apply(this,arguments)||this}var t;return(0,r.default)(Input,e),Input.prototype.render=function render(){var e=this.props,t=e.question,r=e.savingState,a=e.placeholder;return n.default.createElement("div",{className:"horizontal-box align-items-left theme-light c-prompt-card"},n.default.createElement(f.default,{hideFollow:!0,question:t,parentPost:t,savingState:r,placeholder:(0,h.default)(a)}))},Input}(n.default.Component);exports.Input=E,E.propTypes={placeholder:n.default.PropTypes.string.isRequired,question:n.default.PropTypes.object.isRequired,savingState:n.default.PropTypes.string.isRequired};var b=function(e){function Saving(){return e.apply(this,arguments)||this}var t;return(0,r.default)(Saving,e),Saving.prototype.render=function render(){return n.default.createElement("div",{className:"horizontal-box align-items-absolute-center bgcolor-white c-prompt-card color-hint-text"},n.default.createElement(d.default,{name:"spinner",className:"cif-spin"}),n.default.createElement("span",{className:"caption-text"},(0,h.default)("Submitting Your Response")))},Saving}(n.default.Component);exports.Saving=b;var C=function(e){function CompletedBaseComponent(){return e.apply(this,arguments)||this}var t;return(0,r.default)(CompletedBaseComponent,e),CompletedBaseComponent.prototype.render=function render(){var e=this.props.url;return n.default.createElement("div",{className:"vertical-box align-items-absolute-center bgcolor-white c-prompt-card"},n.default.createElement("span",{className:"color-secondary-text"},(0,h.default)("Your response has been submitted. Engage and discuss with other learners below!")),this.props.url&&n.default.createElement(a.Link,{className:"link-button secondary",to:e},(0,h.default)("View My Response")))},CompletedBaseComponent}(n.default.Component);C.propTypes={showLink:n.default.PropTypes.bool,questionId:n.default.PropTypes.string.isRequired,url:n.default.PropTypes.string};var P={Input:E,Saving:b,Completed:o.default.compose((0,p.default)(function(e){if(e.showLink){var t=(0,u.default)("/api/onDemandCourseForumAnswers.v1/",{type:"rest"}),r=[e.userId,e.courseId,e.questionId].join("~"),n=(new i.default).addQueryParam("q","byForumQuestionId").addQueryParam("userCourseQuestionId",r).addQueryParam("sort","createdAtAsc").addQueryParam("creatorId",e.userId).toString();return(0,s.default)(t.get(n)).then(function(e){if(!e.elements.length)return{url:void 0};var t;return{url:(0,l.buildUrlForDiscussionPrompt)(e.elements[0].forumAnswerId)}})}return(0,s.default)({url:void 0})}))(C),RespondedLearnersImage:o.default.compose((0,c.default)(["ThreadDetailsStore"],function(e,t){var r=e.ThreadDetailsStore,n=t.questionId,a=t.page;return{answers:r.getReplies(n,a,g.answerSorts.newestSort)||[]}}))(I)},S=P.Completed,D=P.RespondedLearnersImage;exports.RespondedLearnersImage=D,exports.Completed=S;var T=P;exports.default=T},FGtb:function(module,exports,e){"use strict";var t=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=t(e("VbXa")),n,a=function(e){function OnDemandDiscussionPromptQuestions(){return e.apply(this,arguments)||this}return(0,r.default)(OnDemandDiscussionPromptQuestions,e),OnDemandDiscussionPromptQuestions}(t(e("W3Lk")).default);a.RESOURCE_NAME="onDemandDiscussionPromptQuestions.v1",a.DEFAULT_FIELDS=["content","creatorId","createdAt","forumId","sessionId","lastAnsweredBy","lastAnsweredAt","totalAnswerCount","topLevelAnswerCount","viewCount"];var o=a;exports.default=o},RX7l:function(module,exports,e){var t=e("sIUq"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},a=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},TpA2:function(module,exports,e){"use strict";var t=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=t(e("VYij")),n=t(e("PStO")),a=t(e("jsrg")),o=t(e("VXRf")),s=e("PDuk"),u=t(e("sQ/U")),i=t(e("2jK5")),l=t(e("FGtb")),d=e("SaLm"),p=t(e("bmRM")),c,f=r.default.compose(n.default.createContainer(function(e){var t=e.itemMetadata,r=t.getId(),n=t.get("course").get("id");return{prompt:i.default.get((0,s.tupleToStringKey)([u.default.get().id,n,r]),{includes:i.default.DEFAULT_INCLUDES,fields:i.default.DEFAULT_FIELDS})}}),n.default.createContainer(function(e){var t=e.prompt;if(!t||!t.promptType)return{};var r=t.promptType.definition.courseItemForumQuestionId,n=[t.userId,r].join("~");return{discussionPromptQuestion:l.default.localGet(n,{fields:l.default.DEFAULT_FIELDS})}}),(0,a.default)(function(e){var t;return!!e.discussionPromptQuestion}),(0,o.default)(function(e){var t=e.discussionPromptQuestion,r=t&&t.id.split("~")[3],n;return{isLoaded:!0,questionId:r,question:{id:r,questionId:r,type:"question",forumType:d.naptimeForumTypes.rootForumType},promptContent:t&&t.content.details,learnerCount:t&&t.totalAnswerCount}}))(p.default);exports.default=f},"VUk/":function(module,exports,e){},WdIA:function(module,exports,e){var t=e("VUk/"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},a=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},bmRM:function(module,exports,e){"use strict";var t=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=t(e("VbXa")),n=t(e("sbe7")),a=t(e("sQ/U")),o=e("kvW3"),s=e("wvdd"),u=t(e("BZ+2")),i=e("0jv7"),l=e("SaLm"),d=t(e("y1LI")),p=t(e("JUgE")),c=t(e("EWSN")),f=e("BMks"),m=t(e("GP6s"));e("RX7l");var v=function(e){function DiscussionPrompt(t,r){var n;return(n=e.call(this,t,r)||this).state={savingState:i.savingStates.UNCHANGED,forumError:!1},n}(0,r.default)(DiscussionPrompt,e);var t=DiscussionPrompt.prototype;return t.componentDidMount=function componentDidMount(){this.props.isLoaded&&(this.setState({questionId:this.props.questionId}),this.fetchAnswers(this.props.questionId,l.answerSorts.newestSort,this.props.page))},t.componentWillReceiveProps=function componentWillReceiveProps(e){var t=this.state.questionId;this.setState({savingState:e.savingStates[t]||i.savingStates.UNCHANGED}),t&&this.props.savingStates[t]===i.savingStates.SAVING&&e.savingStates[t]===i.savingStates.SAVED&&this.fetchAnswers(t,l.answerSorts.newestSort,this.props.page)},t.componentDidUpdate=function componentDidUpdate(e,t){var r=this.props,n=r.questionId,a=r.page;e.page!==a&&this.fetchAnswers(n,l.answerSorts.newestSort,a)},t.fetchAnswers=function fetchAnswers(e,t,r){var n=this.props,o=n.courseId,u=n.courseSlug,i=n.currentForum,l;(0,this.context.executeAction)(s.fetchAnswers,{questionId:e,courseId:o,courseSlug:u,sort:t,page:r,contextId:o,userId:a.default.get().id,forumType:i.forumType.typeName})},t.renderLoading=function renderLoading(){return n.default.createElement("div",{className:"vertical-box align-items-vertical-center"},n.default.createElement(d.default,{name:"spinner",className:"cif-spin cif-3x"}))},t.renderInput=function renderInput(){var e=this.props,t=e.learnerCount,r=e.question,a=e.questionId,s=e.page,u=t>0;return n.default.createElement("div",null,n.default.createElement("div",{className:"color-hint-text participation-text"},(0,m.default)("Participation is optional")),n.default.createElement(f.Input,{savingState:this.state.savingState,question:r,placeholder:(0,m.default)("Type your response here...")}),n.default.createElement(f.RespondedLearnersImage,{responseCount:t,questionId:a,page:s}),n.default.createElement("div",{className:"horizontal-box align-items-absolute-center caption-text color-secondary-text"},u?n.default.createElement("div",null,n.default.createElement(o.FormattedNumber,{value:t})," ",n.default.createElement(o.FormattedMessage,{message:(0,m.default)("{learnerCount, plural, =1 { learner has} other { learners have}} submitted a response."),learnerCount:t})):n.default.createElement("div",null,(0,m.default)("Be the first to submit a response"))))},t.renderError=function renderError(){return n.default.createElement("div",{className:"horizontal-box align-items-absolute-center bgcolor-white c-prompt-card"},n.default.createElement("span",{className:"caption-text color-secondary-text"},(0,m.default)("Sorry, we were unable to retrieve a forum.")))},t.renderCompleted=function renderCompleted(){var e=this.props,t=e.questionId,r=e.previouslyCompleted,o=e.page,s=e.currentForum,u=e.answerId,i=e.currentForumUrl,d=e.courseId;return n.default.createElement("div",null,n.default.createElement(f.Completed,{showLink:r,questionId:t,userId:a.default.get().id,courseId:d}),n.default.createElement("div",{className:"c-thread-container"},n.default.createElement(c.default,{sort:l.answerSorts.newestSort,page:o,forumId:s.id,questionId:t,answerId:u,forumLink:i})))},t.renderContent=function renderContent(){var e=this.state.savingState;if(e===i.savingStates.SAVED||this.props.previouslyCompleted)return this.renderCompleted();if(e===i.savingStates.UNCHANGED)return this.renderInput();if(e===i.savingStates.SAVING)return n.default.createElement(f.Saving,null);return!1},t.renderBody=function renderBody(){var e=this.props.promptContent;return n.default.createElement("div",null,n.default.createElement("span",null,n.default.createElement(p.default,{cml:e})),this.renderContent())},t.render=function render(){var e=this.props.isLoaded,t=this.state.forumError;return n.default.createElement("div",{className:"rc-DiscussionPrompt"},!t&&(e?this.renderBody():this.renderLoading()),t&&this.renderError())},DiscussionPrompt}(n.default.Component);v.propTypes={savingStates:n.default.PropTypes.object.isRequired,previouslyCompleted:n.default.PropTypes.bool.isRequired,page:n.default.PropTypes.number,answerId:n.default.PropTypes.string,courseId:n.default.PropTypes.string,courseSlug:n.default.PropTypes.string,currentForum:n.default.PropTypes.instanceOf(u.default),currentForumUrl:n.default.PropTypes.string,questionId:n.default.PropTypes.string,question:n.default.PropTypes.object,promptContent:n.default.PropTypes.object,learnerCount:n.default.PropTypes.number,isLoaded:n.default.PropTypes.bool},v.contextTypes={executeAction:n.default.PropTypes.func.isRequired,router:n.default.PropTypes.object.isRequired};var g=v;exports.default=g},geBo:function(module,exports,e){"use strict";var t=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=t(e("VbXa")),n=t(e("MVZn")),a=t(e("sbe7")),o=e("VYij"),s=t(e("ngyh")),u=t(e("+LJP")),i=t(e("8cuT")),l=t(e("pqXt")),d=t(e("TpA2")),p=t(e("jzks")),c=t(e("oQ9N")),f=t(e("KMW/")),m=t(e("UU2Q")),v=function discussionPromptContainer(){return d.default},g=(0,o.compose)((0,c.default)({fields:["forumType","urlId"]}),(0,u.default)(function(e,t){return(0,n.default)({},(0,l.default)(e,t),{page:e.location.query.page?parseInt(e.location.query.page,10):1,answerId:e.location.query.answerId?e.location.query.answerId:void 0})}),(0,i.default)(["ThreadDetailsStore"],function(e,t){var r=e.ThreadDetailsStore,n=t.itemMetadata;return{savingStates:Object.assign({},r.savingStates)}}))(v()),h=function(e){function FluxibleConnectedDiscussionPrompt(){return e.apply(this,arguments)||this}(0,r.default)(FluxibleConnectedDiscussionPrompt,e);var t=FluxibleConnectedDiscussionPrompt.prototype;return t.componentWillMount=function componentWillMount(){this.fluxibleContext=(0,m.default)(this.context.fluxibleContext)},t.render=function render(){return a.default.createElement(s.default,{context:this.fluxibleContext.getComponentContext()},a.default.createElement(g,this.props))},FluxibleConnectedDiscussionPrompt}(a.default.Component);exports.default=h,h.contextTypes={fluxibleContext:a.default.PropTypes.object}},jzks:function(module,exports,e){"use strict";var t=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=t(e("VYij")),n=t(e("PStO")),a=t(e("jsrg")),o=t(e("VXRf")),s=t(e("23qH")),u=e("SaLm"),i=t(e("bmRM")),l,d=r.default.compose(n.default.createContainer(function(e){var t=e.userId,r=e.itemMetadata,n=r.getId(),a=r.get("course").get("id");return{legacyDiscussionQuestionResults:s.default.finder("byPromptItem",{params:{courseId:a,itemId:n,sort:u.answerSorts.newestSort}})}}),(0,a.default)(function(e){var t;return!!e.legacyDiscussionQuestionResults}),(0,o.default)(function(e){var t=e.legacyDiscussionQuestionResults,n=(0,r.default)(t).first(),a=n&&n.id,o;return{isLoaded:!0,questionId:a,question:{id:a,questionId:a,type:"question",forumType:u.naptimeForumTypes.rootForumType},promptContent:n&&n.content.details,learnerCount:n&&(n.answerCount||n.topLevelAnswerCount)}}))(i.default);exports.default=d},sIUq:function(module,exports,e){},thMO:function(module,exports,e){"use strict";var t=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=t(e("VbXa")),n=t(e("Yt/I")),a=t(e("uxKl")),o=t(e("CkRy")),s=t(e("sbe7")),u=t(e("geBo"));e("WdIA");var i,l=function(e){function DiscussionPromptWrapper(){return e.apply(this,arguments)||this}var t;return(0,r.default)(DiscussionPromptWrapper,e),DiscussionPromptWrapper.prototype.render=function render(){var e=this.props,t=e.computedItem,r=e.itemMetadata;return s.default.createElement(o.default,{className:"rc-DiscussionPromptWrapper",hideFeedback:!0},s.default.createElement("div",{className:"discussion-prompt-content"},s.default.createElement("div",{className:"vertical-box align-items-vertical-center"},s.default.createElement("div",null,s.default.createElement("span",{className:"cif-stack cif-2x","aria-label":(0,n.default)("Discussion Prompt")},s.default.createElement("i",{className:"cif-circle cif-stack-2x c-prompt-icon"}),s.default.createElement("i",{className:"cif-comment cif-stack-1x cif-inverse comment-icon"}))),s.default.createElement("h4",{className:"c-prompt-title"},t.name)),s.default.createElement(u.default,{itemMetadata:r,previouslyCompleted:t.isCompleted})))},DiscussionPromptWrapper}(s.default.Component);exports.default=l}}]);
//# sourceMappingURL=15.b24038fc970b4faaca7d.js.map